package cc.unknown.module.impl.exploit;

import cc.unknown.event.impl.EventLink;
import cc.unknown.event.impl.network.PacketEvent;
import cc.unknown.event.impl.other.ClickGuiEvent;
import cc.unknown.module.impl.Module;
import cc.unknown.module.impl.api.Category;
import cc.unknown.module.impl.api.Register;
import cc.unknown.module.setting.impl.SliderValue;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.C00PacketKeepAlive;

@Register(name = "PingSpoof", category = Category.Exploit)
public class PingSpoof extends Module {

	private SliderValue delay = new SliderValue("Delay", 700, 0, 5000, 1);
	
	public PingSpoof() {
		this.registerSetting(delay);
	}

	@EventLink
	public void onGui(ClickGuiEvent e) {
		this.setSuffix("- [" + delay.getInputToInt() + " ms]");
	}

	@EventLink
	public void onPacket(PacketEvent e) {
		Packet<?> p = e.getPacket();
		if (e.isSend()) {
			if (p instanceof C00PacketKeepAlive) {
				try {
					Thread.sleep(delay.getInputToLong());
				} catch (InterruptedException ignore) {

				}
			}
		}
	}
}
